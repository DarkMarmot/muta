
<blueprint>

    <data name="reportAction"/>

    <command name="reportAction_cmd" gather="itemData" pipe="selReportAction_cmd"/>

    <sensor watch="itemData" need="adjStatusHash" transform="toNewReportingAction" pipe="reportAction"/>

    <command name="cmd_ChooseAction" />

    <cog node="menu" url="REIV_BUTTON_MENU" source="prop menuConfig" />

</blueprint>

<display>

    <div id="menu" class="ephex_absolute_center">

    </div>

</display>

<script>
    $.cog({

        toNewReportingAction: function(msg) {
            var key = msg.itemData.record.textResult + '|' + msg.itemData.record.performingOrgName
            return msg.adjStatusHash[key]
        },

        menuConfig: {

            classes: {
                menu: 'ephex_toggle_menu_big',
                button: 'ephex_toggle_button'
            },

            renderer: 'REIV_TEXT_BUTTON_RENDERER',
            tell: 'reportAction_cmd',
            show: 'reportAction',

            items: [
                { title: 'Send', value: 'send' },
                { title: 'Ignore', value: 'ignore' }
            ]
        }

    });
</script>

